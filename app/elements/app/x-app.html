<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="/bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="/bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="/bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-item/paper-item.html">
<link rel="import" href="/bower_components/paper-material/paper-material.html">
<link rel="import" href="/bower_components/paper-menu/paper-menu.html">
<link rel="import" href="/bower_components/paper-submenu/paper-submenu.html">
<link rel="import" href="/bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="/bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="/bower_components/iron-selector/iron-selector.html">
<link rel="import" href="/bower_components/paper-styles/paper-styles.html">
<link rel="import" href="/bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="/bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="/bower_components/neon-animation/neon-animations.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/bower_components/iron-image/iron-image.html">

<!--

Extended Header + List Right + Card Over Toolbar

 -->
<dom-module id="x-app">
    <link rel="import" type="css" href="x-app.css">
    <template>
        <paper-drawer-panel id="drawerPanel" 
                            responsive-width="1024px"
                            drawer-width="{{drawerWidth}}" 
                            right-drawer>

            <paper-header-panel class="list-panel" drawer mode="seamed">
                <catalog-view class="fit"></catalog-view>
            </paper-header-panel>

            <paper-header-panel class="main-panel" main mode="{{mainMode}}">
                <!-- Main Toolbar -->
                <paper-toolbar class$="{{toolbarClass}}">
                  <div title class="toolbar-title">My Project Title</div>
                  <paper-icon-button on-click="_onPrevClick"  icon="arrow-back"></paper-icon-button>
                  <paper-icon-button on-click="_onNextClick"  icon="arrow-forward"></paper-icon-button>
                  <span class="flex"></span>
                  <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
                </paper-toolbar>

                <div class="content">
                    <paper-material>
                        <neon-animated-pages id="pages" 
                                             class="flex fit" 
                                             selected="[[selected]]" 
                                             entry-animation="[[entryAnimation]]" 
                                             exit-animation="[[exitAnimation]]">

                            <neon-animatable>1</neon-animatable>
                            <neon-animatable>2</neon-animatable>
                            <neon-animatable>3</neon-animatable>
                            <neon-animatable>4</neon-animatable>
                            <neon-animatable>5</neon-animatable>

                        </neon-animated-pages>
                    </paper-material>
                </div>

            </paper-header-panel>
        </paper-drawer-panel>
        
        <iron-media-query query="(max-width: 780px)" query-matches="{{_isMobile}}"></iron-media-query>
    </template>
    <!--

    Logic

     -->
    <script>
    Polymer({

        is: 'x-app',

        created: function() {
            console.log(this.localName + ' #' + this.id + ' was created', this);
        },
        ready: function() {
            this.selected = 0;
            <!-- access a local DOM element by ID using this.$ -->
            console.log(this.localName + ' #' + this.id + ' is Ready');
        },
        attached: function() {
            console.log(this.localName + ' #' + this.id + ' was attached');
        },

        detached: function() {
            console.log(this.localName + ' #' + this.id + ' was detached');
        },

        attributeChanged: function(name, type) {
            console.log(this.localName + '#' + this.id + ' attribute ' + name +
                ' was changed to ' + this.getAttribute(name));
        },


        properties: {

            _isMobile: {
                type: Boolean,
                observer: '_isMobileChanged'
            },

        },

        toggle: function() {
          this.$.collapse.toggle();
        },

        _listTap: function() {
            console.log("_goToPage: ");
            this._goToPage(3);
            this.$.drawerPanel.closeDrawer();
        },

        _goToPage: function(index) {
            console.log("_goToPage: ", index);
            this.entryAnimation = 'fade-in-animation';
            this.exitAnimation = 'fade-out-animation';
            this.selected = index;
        },
        _isMobileChanged: function(isMobile) {
            this.mainMode = isMobile ? 'seamed' : 'cover';
            this.drawerWidth = isMobile ? '100%' : '320px';
            this.toolbarClass = isMobile ? '' : 'tall';
            this.updateStyles();
        },

        _onPrevClick: function() {
            console.log("Prev", this.selected);
            this.entryAnimation = 'slide-from-left-animation';
            this.exitAnimation = 'slide-right-animation';
            this.selected = this.selected === 0 ? 4 : (this.selected - 1);
        },

        _onNextClick: function() {
            console.log("Next", this.selected);
            this.entryAnimation = 'slide-from-right-animation';
            this.exitAnimation = 'slide-left-animation';
            this.selected = this.selected === 4 ? 0 : (this.selected + 1);
        }
    });
    </script>
</dom-module>
